############################################
# Single node configuration for development.
############################################
#
# NOTE: This sets up a single node that is a Tendermint validator,
#       a storage node and an Ekiden worker at the same time. In
#       actual deployments these nodes will likely run separately.
#
datadir: /tmp/runtime-ethereum-single_node_sgx

# Debug.
#
# Enable test keys, and the built in test entity to reduce config maintenance
# burden.
debug:
  allow_test_keys: true
  test_entity: true

# Logging.
# Per-module log levels are defined below. If you prefer just one unified log level, you can use:
# log:
#   level: debug
log:
  format: json
  file: ekiden.log
  level:
    # Per-module log levels. Longest prefix match will be taken. Fallback to "default", if no match.
    default: debug
    tendermint: warn
    tendermint/context: error

# Genesis.
genesis:
  file: /tmp/runtime-ethereum-single_node_sgx/genesis.json

# Internal gRPC services.
grpc:
  log:
    verbose_debug: true

# Worker configuration.
worker:
  compute:
    enabled: true
    backend: sandboxed
    runtime_loader: .ekiden/target/debug/ekiden-runtime-loader
    runtime:
      binary: .runtime/target/x86_64-fortanix-unknown-sgx/debug/runtime-ethereum.sgxs
      sgx_ids:
        - "0000000000000000000000000000000000000000000000000000000000000000"
  runtime:
    id: "0000000000000000000000000000000000000000000000000000000000000000"
  storage:
    enabled: true
  txnscheduler:
    enabled: true
  merge:
    enabled: true
  client:
    port: 9200
    addresses:
      - "127.0.0.1:9200"
  p2p:
    port: 9100
  keymanager:
    enabled: true
    tee_hardware: intel-sgx
    may_generate: true
    runtime:
      id: "ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"
      binary: .ekiden/target/x86_64-fortanix-unknown-sgx/debug/ekiden-keymanager-runtime.sgxs
      loader: .ekiden/target/debug/ekiden-runtime-loader

# IAS configuration.
ias:
  proxy_addr: "127.0.0.1:9001"

# Epochtime backend.
epochtime:
  backend: tendermint
  tendermint:
    # This makes each epoch last for 30 tendermint blocks.
    interval: 30

# Conesensus backend.
consensus:
  backend: tendermint

# Storage backend.
storage:
  backend: leveldb

# Roothash backend.
roothash:
  tendermint:
    index_blocks: true

# Tendermint backend configuration.
tendermint:
  consensus:
    timeout_commit: 1s

# Client configuration.
client:
  indexer:
    runtimes:
      - "0000000000000000000000000000000000000000000000000000000000000000"

# Tracing settings.
#tracing:
#  enabled: 1
#  reporter:
#    agent_addr: jaeger:6831
#  sampler:
#    # Sampling frequency, 100% by default.
#    param: 1.0
