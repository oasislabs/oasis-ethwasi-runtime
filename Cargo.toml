[package]
name = "runtime-ethereum"
version = "0.1.0"
authors = ["Oasis Labs Inc. <info@oasislabs.com>"]
build = "build.rs"

[dependencies]
ethereum-api = { path = "./api" }
runtime-ethereum-common = { path = "./common" }

common-types = { git = "https://github.com/oasislabs/parity", branch = "eauge/impl-invoke/return-outcome-on-transaction-push"}
ethcore = { git = "https://github.com/oasislabs/parity", branch = "eauge/impl-invoke/return-outcome-on-transaction-push"}
ethkey = { git = "https://github.com/oasislabs/parity", branch = "eauge/impl-invoke/return-outcome-on-transaction-push"}
hashdb = { git = "https://github.com/oasislabs/parity", branch = "eauge/impl-invoke/return-outcome-on-transaction-push"}
keccak-hash = { git = "https://github.com/oasislabs/parity", branch = "eauge/impl-invoke/return-outcome-on-transaction-push"}
ekiden-common = { git = "https://github.com/oasislabs/ekiden", branch = "master" }
ekiden-core = { git = "https://github.com/oasislabs/ekiden", branch = "master" }
ekiden-enclave-common = { git = "https://github.com/oasislabs/ekiden", branch = "master" }
ekiden-keymanager-client = { git = "https://github.com/oasislabs/ekiden", branch = "master" }
ekiden-keymanager-common = { git = "https://github.com/oasislabs/ekiden", branch = "master" }
ekiden-roothash-base = { git = "https://github.com/oasislabs/ekiden", branch = "master" }
ekiden-storage-base = { git = "https://github.com/oasislabs/ekiden", branch = "master" }
ekiden-storage-dummy = { git = "https://github.com/oasislabs/ekiden", branch = "master" }
ekiden-storage-lru = { git = "https://github.com/oasislabs/ekiden", branch = "master" }
ekiden-trusted = { git = "https://github.com/oasislabs/ekiden", branch = "master" }
ethereum-types = { git = "https://github.com/oasislabs/primitives", branch = "ekiden" }

bytes = "0.4"
byteorder = "1.0"
elastic-array = "0.10"
hex = "0.3"
lazy_static = "1.0.1"
log = "0.4"
protobuf = "~2.0"
serde_json = "1.0"
sha3 = "0.6"
sodalite = "0.3.0"

[build-dependencies]
ekiden-edl = { git = "https://github.com/oasislabs/ekiden", branch = "master" }
ekiden-tools = { git = "https://github.com/oasislabs/ekiden", branch = "master" }

[dev-dependencies]
time = "0.1"

[features]
default = ["confidential"]
confidential = []
benchmark = []
# Use test feature flag since Rust doesn't support conditional compilation using
# cfg(test) on dependent crates.
test = ["runtime-ethereum-common/test"]
production-genesis = []

[profile.release]
panic = "abort"

# temporary fix for incompatibility between jsonrpc and ws-rs
[patch."https://github.com/tomusdrw/ws-rs"]
ws = { git = "https://github.com/oasislabs/ws-rs", branch = "ekiden" }

[patch.crates-io]
ring = { git = "https://github.com/oasislabs/ring", branch = "0.14.0-ekiden" }

[workspace]
members = [
    "api",
    "common",
    "gateway",
    "genesis",
    "inspector",
]
